# 微服务应用架构的主要问题

## 服务发现

### 问题

微服务实例通常使用动态 IP，或者内部IP，特别是运行在容器中的微服务。这样客户端很难直接对服务实例进行访问。

### 解决方案

增加服务发现的组件，用于实时管理和追踪微服务和对应IP的关系

### 需要的能力

- 自动注册/注销微服务
- 客户端能通过逻辑名称访问服务
- 发往微服务的请求支持load-balance
- 能检测不健康的服务，客户请求不能发往不健康的服务

## Edge 服务

### 问题

暴露给外部访问的服务需要受到保护

### 解决方案

增加一个 Edge Server，类似 Proxy，实现对内部资源的屏蔽

![image-20210330184451383](%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%20k8s%20%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84.assets/image-20210330184451383.png)

### 需要的能力

- 对内部服务进行隐藏
- 使用 OAuth, OIDC, JWT tokens对暴露的服务进行保护，确保客户请求是安全可信的

## 响应式微服务

### 问题

阻塞的请求服务会造成大量的请求堆积，影响系统的吞吐量和响应服务的能力

### 解决方案

使用非阻塞 IO 